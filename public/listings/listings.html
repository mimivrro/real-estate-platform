<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>All Property Listings</title>
  <link rel="stylesheet" href="../styles/listings.css">
</head>
<body>

  <!-- ✅ Redirect if not logged in -->
  <script>
    const user = JSON.parse(localStorage.getItem("loggedInUser"));
    if (!user) {
      window.location.href = "../auth/register.html";
    }
  </script>

  <!-- 🏠 Header restored to previous design -->
  <header class="navbar">
    <h1 class="logo">DreamHomes</h1>
    <!-- Only show Add Listing for non-Buyers -->
    <script>
      const role = JSON.parse(localStorage.getItem("loggedInUser"))?.role;
      if (role && role !== "Buyer") {
        document.write('<a href="../listings/add-property.html" class="add-btn">Add Listing</a>');
      }
    </script>
  </header>

  <section class="listings-header">
    <h2>All Property Listings</h2>
    <div class="filters">
      <input type="text" id="search-input" placeholder="Search by title or location" />
      <select id="price-filter">
        <option value="">Sort by Price</option>
        <option value="low-to-high">Low to High</option>
        <option value="high-to-low">High to Low</option>
      </select>
    </div>
  </section>

  <section class="listings-grid listings-container" id="listings-container">
    <!-- Property cards injected by listings.js -->
  </section>

  <script src="../scripts/listings.js"></script>
</body>
</html>
